# 进展
啊说真的我已经被困住这个项目相当长一段时间了，现在看到这个界面就有一种孕吐的感觉...

我写过的中大型基建类项目都快凑够一只手了，一个项目好还是坏，靠不靠谱这个事情，大概初步进入生产时心里就有底了。

比如dubhe，其在模块联邦的同类项目里面具备绝对优势，但按设想的步骤进入生产时，发现真是无比鸡肋，虽然还有优化的空间，心里也知道前路无望，

又比如merak，虽然还存在样式问题，且目前没有什么解决的头猪，但接入时无比丝滑，故而由衷的开心，

但玉衡的情况麻烦的多，代码是没多少，但光是重建文件夹就有三轮了，我特么到现在为止都不确定这玩意儿是个什么水平。

从一开始的摇摇晃摇...不对，是拖拖拽拖，到以vite为核心实现接入和热更新，到这里为止，一切都挺好，因为这些功能确实很棒

但我没办法搞出一个好的`iframe`沙箱！

哎真是该死

有没有不用iframe的iframe啊

按玉衡的思路，用了`iframe`无非就是两种办法：

1. 把渲染的dom直接挂载iframe上，也就是所有js仍在主应用执行，但这会让很多操作变得复杂，比如画布内的拖拽，

我一开始是直接将iframe的所有相关事件，调整属性透传到主应用，但当引入那个grid的时候，一切都失效了

我是想解决来着的，但依赖的那个什么interact的库，各个类缠在一起，类中有类，类上还有类

真的是给我创造压力

我只是想调试，不是想去世

而且就算解决了一个库，其他库一样会有问题，而限制一些库or一些行为，那么engine功能就大大受限，自定义的意义就没有了

2. 主子应用执行完全一样的东西，然后使用yjs做协同

玉衡的模式其实就是：运行js而非json

iframe和主应用又不能运行同一个js文件，就只能每个都运转一遍

然后将主子应用的docModel实现协同，就可以在主子应用分别操作了

但yjs它没有y-iframe啊我淦，它只有websocket+webrtc+各种各样持久层。

而手动applyUpdate+observeDeep+update

差不多快把我送走了

我写到这里的时

## 10.7
emmm 上次写到一半睡着了

问题不大

但沙箱还是没解决

等我有空了，先把`grid layout`为啥不能在现行沙箱中起效（来源自`@interactjs/interact`）的问题解决，

就能覆盖大部分基本使用了

沙箱对应的是`布局`,`响应式`的问题

但还有其他的问题--`状态`和`请求`

虽然当下通过声明`js`变量，确实可以实现

但这样，太依赖自定义的规范，和平台之外的编码了

效率不够，也不方便收费...

这个时候我想到了以前的一个项目[phecda-server](),就是一个可以类型共享(类`trpc`)的类`nestjs`框架

使用`trpc`时，调用函数，请求对应的`url`是什么，这是根据内部的规范，而`ps`是服务端生成元数据，客户端在编译时拿到元数据并拼凑请求

正常情况下，`ps`会增大编译负担，没有任何优势

但有元数据给以下流程提供了可能


1. 描述需求，通过`gpt` 生成模型
2. 根据模型生成`p-s`代码，写入文件
3. 通过元数据实现平台和服务端双向绑定,从而进行连续修改（通过`gpt`修改模型关系和大的结构）
4. 声明前端数据，比如展示一组图片，那么前端应存在一个数组储存图片链接
5. 进入`http`调试（类似`postman`），修改接口实现
6. 保证所有`请求`正常，利用前面的前端数据和接口，进入`ui`编辑
7. 打包->ci/cd->部署






