{
  "resolvedId": "D:/MyProject/5/alioth/packages/preset-layout/src/grid/editor/Container.vue?vue&type=script&setup=true&lang.ts",
  "transforms": [
    {
      "name": "vite:vue",
      "result": "import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { emitter, useV } from 'phecda-vue'\nimport { GridLayout } from 'grid-layout-plus'\nimport { computed, onBeforeUnmount, onMounted, ref } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Container',\n  props: {\n    a_mode: { type: String, required: true }\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\n\n\nlet index = 0\nconst { doc, activePage } = useV(__PHECDA__.doc)\nfunction update() {\n  activePage.value.children.forEach((node) => {\n    node.set('layout.x', node.attrs.layout.x)\n    node.set('layout.y', node.attrs.layout.y)\n  })\n}\nconst layout = computed(() => {\n  return activePage.value.children.map(item => item.attrs.layout)\n})\nconst dom = ref<HTMLElement>(null as any)\n\nfunction addBlock(module: any, e: MouseEvent) {\n  const { clientX } = e\n  const { width, left } = dom.value.getBoundingClientRect()\n  const { key, label, meta } = module\n  const { hoverNode, root } = doc.value\n  // const index = createIndex(key)\n  const parent = hoverNode || activePage.value\n  const info = {\n    x: Math.floor(12 * (clientX - left) / width),\n    y: 0, // puts it at the bottom\n    w: 2,\n    h: 2,\n    i: `${index++}`,\n  }\n  const block = doc.value.createNode(Object.assign({\n    slot: 'default',\n    key,\n    index,\n    label,\n    propsData: {\n    },\n    layout: info,\n    level: parent === root ? 1 : parent.attrs.level + 1,\n    top: parent === activePage.value ? e.offsetY : 0,\n    left: parent === activePage.value ? e.offsetX : 0,\n  }, meta?.init || {}))\n  parent.insert(block)\n  emitter.emit('alioth:node-action', null)\n}\n\nconst { add, del } = useV(__PHECDA__.drag)\n\nonMounted(() => {\n  add(dom.value, addBlock)\n})\nonBeforeUnmount(() => {\n  del(dom.value)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", {\n    ref_key: \"dom\",\n    ref: dom,\n    class: \"a-container\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (_unref(doc).cancel()), [\"stop\",\"self\"])),\n    onMouseup: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"stop\"]))\n  }, [\n    _createVNode(_unref(GridLayout), {\n      layout: layout.value,\n      \"onUpdate:layout\": _cache[0] || (_cache[0] = ($event: any) => ((layout).value = $event)),\n      \"col-num\": 12,\n      \"row-height\": 30,\n      \"is-draggable\": _ctx.a_mode !== 'render',\n      \"is-resizable\": _ctx.a_mode !== 'render',\n      \"vertical-compact\": \"\",\n      \"prevent-collision\": \"\",\n      \"use-css-transforms\": \"\",\n      onLayoutUpdated: update\n    }, {\n      default: _withCtx(() => [\n        _renderSlot(_ctx.$slots, \"default\")\n      ]),\n      _: 3 /* FORWARDED */\n    }, 8 /* PROPS */, [\"layout\", \"is-draggable\", \"is-resizable\"])\n  ], 544 /* HYDRATE_EVENTS, NEED_PATCH */))\n}\n}\n\n})",
      "start": 1698982452717,
      "end": 1698982452717,
      "sourcemaps": {
        "version": 3,
        "sources": [
          "D:/MyProject/5/alioth/packages/preset-layout/src/grid/editor/Container.vue"
        ],
        "sourcesContent": [
          "<script setup lang=\"ts\">\nimport { emitter, useV } from 'phecda-vue'\nimport { GridLayout } from 'grid-layout-plus'\nimport { computed, onBeforeUnmount, onMounted, ref } from 'vue'\n\nconst props = defineProps<{ a_mode: string }>()\n\nlet index = 0\nconst { doc, activePage } = useV(__PHECDA__.doc)\nfunction update() {\n  activePage.value.children.forEach((node) => {\n    node.set('layout.x', node.attrs.layout.x)\n    node.set('layout.y', node.attrs.layout.y)\n  })\n}\nconst layout = computed(() => {\n  return activePage.value.children.map(item => item.attrs.layout)\n})\nconst dom = ref<HTMLElement>(null as any)\n\nfunction addBlock(module: any, e: MouseEvent) {\n  const { clientX } = e\n  const { width, left } = dom.value.getBoundingClientRect()\n  const { key, label, meta } = module\n  const { hoverNode, root } = doc.value\n  // const index = createIndex(key)\n  const parent = hoverNode || activePage.value\n  const info = {\n    x: Math.floor(12 * (clientX - left) / width),\n    y: 0, // puts it at the bottom\n    w: 2,\n    h: 2,\n    i: `${index++}`,\n  }\n  const block = doc.value.createNode(Object.assign({\n    slot: 'default',\n    key,\n    index,\n    label,\n    propsData: {\n    },\n    layout: info,\n    level: parent === root ? 1 : parent.attrs.level + 1,\n    top: parent === activePage.value ? e.offsetY : 0,\n    left: parent === activePage.value ? e.offsetX : 0,\n  }, meta?.init || {}))\n  parent.insert(block)\n  emitter.emit('alioth:node-action', null)\n}\n\nconst { add, del } = useV(__PHECDA__.drag)\n\nonMounted(() => {\n  add(dom.value, addBlock)\n})\nonBeforeUnmount(() => {\n  del(dom.value)\n})\n</script>\n\n<template>\n  <section ref=\"dom\" class=\"a-container\" @click.stop.self=\"doc.cancel()\" @mouseup.stop>\n    <GridLayout\n      v-model:layout=\"layout\" :col-num=\"12\" :row-height=\"30\" :is-draggable=\"a_mode !== 'render'\"\n      :is-resizable=\"a_mode !== 'render'\" vertical-compact prevent-collision use-css-transforms\n      @layout-updated=\"update\"\n    >\n      <slot />\n    </GridLayout>\n  </section>\n</template>\n\n<style>\n.a-container {\n  min-width: 600px;\n  min-height: 300px;\n}\n</style>\n"
        ],
        "names": [],
        "mappings": ";;;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/D;;;;;;;;;;AAJwB;AAKuB;AAC/C;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,CAAC,CAAC,CAAC,CAAC;AACJ,CAAC;AACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjE,CAAC,CAAC;AACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACzC;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAClC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC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"
      }
    },
    {
      "name": "vite:css",
      "start": 1698982452718,
      "end": 1698982452718,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "result": "import { defineComponent as _defineComponent } from \"vue\";\nimport { renderSlot as _renderSlot, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { emitter, useV } from \"phecda-vue\";\nimport { GridLayout } from \"grid-layout-plus\";\nimport { computed, onBeforeUnmount, onMounted, ref } from \"vue\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"Container\",\n  props: {\n    a_mode: { type: String, required: true }\n  },\n  setup(__props) {\n    const props = __props;\n    let index = 0;\n    const { doc, activePage } = useV(__PHECDA__.doc);\n    function update() {\n      activePage.value.children.forEach((node) => {\n        node.set(\"layout.x\", node.attrs.layout.x);\n        node.set(\"layout.y\", node.attrs.layout.y);\n      });\n    }\n    const layout = computed(() => {\n      return activePage.value.children.map((item) => item.attrs.layout);\n    });\n    const dom = ref(null);\n    function addBlock(module, e) {\n      const { clientX } = e;\n      const { width, left } = dom.value.getBoundingClientRect();\n      const { key, label, meta } = module;\n      const { hoverNode, root } = doc.value;\n      const parent = hoverNode || activePage.value;\n      const info = {\n        x: Math.floor(12 * (clientX - left) / width),\n        y: 0,\n        // puts it at the bottom\n        w: 2,\n        h: 2,\n        i: `${index++}`\n      };\n      const block = doc.value.createNode(Object.assign({\n        slot: \"default\",\n        key,\n        index,\n        label,\n        propsData: {},\n        layout: info,\n        level: parent === root ? 1 : parent.attrs.level + 1,\n        top: parent === activePage.value ? e.offsetY : 0,\n        left: parent === activePage.value ? e.offsetX : 0\n      }, meta?.init || {}));\n      parent.insert(block);\n      emitter.emit(\"alioth:node-action\", null);\n    }\n    const { add, del } = useV(__PHECDA__.drag);\n    onMounted(() => {\n      add(dom.value, addBlock);\n    });\n    onBeforeUnmount(() => {\n      del(dom.value);\n    });\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\n        \"section\",\n        {\n          ref_key: \"dom\",\n          ref: dom,\n          class: \"a-container\",\n          onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => _unref(doc).cancel(), [\"stop\", \"self\"])),\n          onMouseup: _cache[2] || (_cache[2] = _withModifiers(() => {\n          }, [\"stop\"]))\n        },\n        [\n          _createVNode(_unref(GridLayout), {\n            layout: layout.value,\n            \"onUpdate:layout\": _cache[0] || (_cache[0] = ($event) => layout.value = $event),\n            \"col-num\": 12,\n            \"row-height\": 30,\n            \"is-draggable\": _ctx.a_mode !== \"render\",\n            \"is-resizable\": _ctx.a_mode !== \"render\",\n            \"vertical-compact\": \"\",\n            \"prevent-collision\": \"\",\n            \"use-css-transforms\": \"\",\n            onLayoutUpdated: update\n          }, {\n            default: _withCtx(() => [\n              _renderSlot(_ctx.$slots, \"default\")\n            ]),\n            _: 3\n            /* FORWARDED */\n          }, 8, [\"layout\", \"is-draggable\", \"is-resizable\"])\n        ],\n        544\n        /* HYDRATE_EVENTS, NEED_PATCH */\n      );\n    };\n  }\n});\n",
      "start": 1698982452718,
      "end": 1698982452733,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "D:/MyProject/5/alioth/packages/preset-layout/src/grid/editor/Container.vue?vue&type=script&setup=true&lang.ts"
        ],
        "sourcesContent": [
          "import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { emitter, useV } from 'phecda-vue'\nimport { GridLayout } from 'grid-layout-plus'\nimport { computed, onBeforeUnmount, onMounted, ref } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Container',\n  props: {\n    a_mode: { type: String, required: true }\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\n\n\nlet index = 0\nconst { doc, activePage } = useV(__PHECDA__.doc)\nfunction update() {\n  activePage.value.children.forEach((node) => {\n    node.set('layout.x', node.attrs.layout.x)\n    node.set('layout.y', node.attrs.layout.y)\n  })\n}\nconst layout = computed(() => {\n  return activePage.value.children.map(item => item.attrs.layout)\n})\nconst dom = ref<HTMLElement>(null as any)\n\nfunction addBlock(module: any, e: MouseEvent) {\n  const { clientX } = e\n  const { width, left } = dom.value.getBoundingClientRect()\n  const { key, label, meta } = module\n  const { hoverNode, root } = doc.value\n  // const index = createIndex(key)\n  const parent = hoverNode || activePage.value\n  const info = {\n    x: Math.floor(12 * (clientX - left) / width),\n    y: 0, // puts it at the bottom\n    w: 2,\n    h: 2,\n    i: `${index++}`,\n  }\n  const block = doc.value.createNode(Object.assign({\n    slot: 'default',\n    key,\n    index,\n    label,\n    propsData: {\n    },\n    layout: info,\n    level: parent === root ? 1 : parent.attrs.level + 1,\n    top: parent === activePage.value ? e.offsetY : 0,\n    left: parent === activePage.value ? e.offsetX : 0,\n  }, meta?.init || {}))\n  parent.insert(block)\n  emitter.emit('alioth:node-action', null)\n}\n\nconst { add, del } = useV(__PHECDA__.drag)\n\nonMounted(() => {\n  add(dom.value, addBlock)\n})\nonBeforeUnmount(() => {\n  del(dom.value)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", {\n    ref_key: \"dom\",\n    ref: dom,\n    class: \"a-container\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (_unref(doc).cancel()), [\"stop\",\"self\"])),\n    onMouseup: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"stop\"]))\n  }, [\n    _createVNode(_unref(GridLayout), {\n      layout: layout.value,\n      \"onUpdate:layout\": _cache[0] || (_cache[0] = ($event: any) => ((layout).value = $event)),\n      \"col-num\": 12,\n      \"row-height\": 30,\n      \"is-draggable\": _ctx.a_mode !== 'render',\n      \"is-resizable\": _ctx.a_mode !== 'render',\n      \"vertical-compact\": \"\",\n      \"prevent-collision\": \"\",\n      \"use-css-transforms\": \"\",\n      onLayoutUpdated: update\n    }, {\n      default: _withCtx(() => [\n        _renderSlot(_ctx.$slots, \"default\")\n      ]),\n      _: 3 /* FORWARDED */\n    }, 8 /* PROPS */, [\"layout\", \"is-draggable\", \"is-resizable\"])\n  ], 544 /* HYDRATE_EVENTS, NEED_PATCH */))\n}\n}\n\n})"
        ],
        "mappings": "AAAA,SAAS,mBAAmB,wBAAwB;AACpD,SAAS,cAAc,aAAa,SAAS,QAAQ,WAAW,UAAU,eAAe,cAAc,iBAAiB,gBAAgB,aAAa,YAAY,sBAAsB,2BAA2B;AAElN,SAAS,SAAS,YAAY;AAC9B,SAAS,kBAAkB;AAC3B,SAAS,UAAU,iBAAiB,WAAW,WAAW;AAG1D,eAA4B,iCAAiB;AAAA,EAC3C,QAAQ;AAAA,EACR,OAAO;AAAA,IACL,QAAQ,EAAE,MAAM,QAAQ,UAAU,KAAK;AAAA,EACzC;AAAA,EACA,MAAM,SAAc;AAEtB,UAAM,QAAQ;AAId,QAAI,QAAQ;AACZ,UAAM,EAAE,KAAK,WAAW,IAAI,KAAK,WAAW,GAAG;AAC/C,aAAS,SAAS;AAChB,iBAAW,MAAM,SAAS,QAAQ,CAAC,SAAS;AAC1C,aAAK,IAAI,YAAY,KAAK,MAAM,OAAO,CAAC;AACxC,aAAK,IAAI,YAAY,KAAK,MAAM,OAAO,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH;AACA,UAAM,SAAS,SAAS,MAAM;AAC5B,aAAO,WAAW,MAAM,SAAS,IAAI,UAAQ,KAAK,MAAM,MAAM;AAAA,IAChE,CAAC;AACD,UAAM,MAAM,IAAiB,IAAW;AAExC,aAAS,SAAS,QAAa,GAAe;AAC5C,YAAM,EAAE,QAAQ,IAAI;AACpB,YAAM,EAAE,OAAO,KAAK,IAAI,IAAI,MAAM,sBAAsB;AACxD,YAAM,EAAE,KAAK,OAAO,KAAK,IAAI;AAC7B,YAAM,EAAE,WAAW,KAAK,IAAI,IAAI;AAEhC,YAAM,SAAS,aAAa,WAAW;AACvC,YAAM,OAAO;AAAA,QACX,GAAG,KAAK,MAAM,MAAM,UAAU,QAAQ,KAAK;AAAA,QAC3C,GAAG;AAAA;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG,GAAG,OAAO;AAAA,MACf;AACA,YAAM,QAAQ,IAAI,MAAM,WAAW,OAAO,OAAO;AAAA,QAC/C,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,WAAW,CACX;AAAA,QACA,QAAQ;AAAA,QACR,OAAO,WAAW,OAAO,IAAI,OAAO,MAAM,QAAQ;AAAA,QAClD,KAAK,WAAW,WAAW,QAAQ,EAAE,UAAU;AAAA,QAC/C,MAAM,WAAW,WAAW,QAAQ,EAAE,UAAU;AAAA,MAClD,GAAG,MAAM,QAAQ,CAAC,CAAC,CAAC;AACpB,aAAO,OAAO,KAAK;AACnB,cAAQ,KAAK,sBAAsB,IAAI;AAAA,IACzC;AAEA,UAAM,EAAE,KAAK,IAAI,IAAI,KAAK,WAAW,IAAI;AAEzC,cAAU,MAAM;AACd,UAAI,IAAI,OAAO,QAAQ;AAAA,IACzB,CAAC;AACD,oBAAgB,MAAM;AACpB,UAAI,IAAI,KAAK;AAAA,IACf,CAAC;AAED,WAAO,CAAC,MAAU,WAAgB;AAChC,aAAQ,WAAW,GAAG;AAAA,QAAoB;AAAA,QAAW;AAAA,UACnD,SAAS;AAAA,UACT,KAAK;AAAA,UACL,OAAO;AAAA,UACP,SAAS,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,eAAe,CAAC,WAAiB,OAAO,GAAG,EAAE,OAAO,GAAI,CAAC,QAAO,MAAM,CAAC;AAAA,UAC1G,WAAW,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,eAAe,MAAM;AAAA,UAAC,GAAG,CAAC,MAAM,CAAC;AAAA,QACxE;AAAA,QAAG;AAAA,UACD,aAAa,OAAO,UAAU,GAAG;AAAA,YAC/B,QAAQ,OAAO;AAAA,YACf,mBAAmB,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAkB,OAAQ,QAAQ;AAAA,YAChF,WAAW;AAAA,YACX,cAAc;AAAA,YACd,gBAAgB,KAAK,WAAW;AAAA,YAChC,gBAAgB,KAAK,WAAW;AAAA,YAChC,oBAAoB;AAAA,YACpB,qBAAqB;AAAA,YACrB,sBAAsB;AAAA,YACtB,iBAAiB;AAAA,UACnB,GAAG;AAAA,YACD,SAAS,SAAS,MAAM;AAAA,cACtB,YAAY,KAAK,QAAQ,SAAS;AAAA,YACpC,CAAC;AAAA,YACD,GAAG;AAAA;AAAA,UACL,GAAG,GAAe,CAAC,UAAU,gBAAgB,cAAc,CAAC;AAAA,QAC9D;AAAA,QAAG;AAAA;AAAA,MAAoC;AAAA,IACzC;AAAA,EACA;AAEA,CAAC;",
        "names": []
      }
    },
    {
      "name": "vite:json",
      "start": 1698982452733,
      "end": 1698982452733,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1698982452733,
      "end": 1698982452733,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "start": 1698982452733,
      "end": 1698982452733,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1698982452733,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    }
  ]
}
