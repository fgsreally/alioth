{
  "resolvedId": "D:/MyProject/5/alioth/packages/preset-layout/src/grid/editor/renderer.ts",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "// import { cloneDeep, isSymbol } from 'lodash-es'\nimport { BaseRenderer } from 'alioth-vue'\nimport type { DefineComponent } from 'vue'\nimport { h } from 'vue'\nimport { cloneDeep } from 'lodash-es'\nimport { emitter, useV } from 'phecda-vue'\nimport { GridItem } from 'grid-layout-plus'\n\nconst { doc, activePage } = useV(__PHECDA__.doc)\n\nexport class renderer extends BaseRenderer<any> {\n  propsData: any\n\n  grid() {\n    if (!this._vnode)\n      return this\n\n    const node = this.node\n    this._vnode = h(GridItem, {\n      ...node.attrs.layout,\n      onMove() {\n        activePage.value.children.forEach((node: any) => {\n          node.set('layout.x', node.attrs.layout.x)\n          node.set('layout.y', node.attrs.layout.y)\n        })\n      },\n      onResize() {\n        node.set('layout.h', node.attrs.layout.h)\n        node.set('layout.w', node.attrs.layout.w)\n      },\n      onResized() {\n        emitter.emit('alioth:node-action', null)\n      },\n      onMoved() {\n        emitter.emit('alioth:node-action', null)\n      },\n    }, this._vnode)\n    return this\n  }\n\n  main(type: string) {\n    if (this.node.parent?.id === 'root') {\n      this._vnode = h(\n        this.comp as DefineComponent,\n        { ...this.node.attrs, a_mode: type, a_node: this.node },\n        this._vnode,\n      )\n      return this\n    }\n    const ret = $alioth_interval.filter(cloneDeep(this.node.attrs.propsData))\n    if (type === 'render' && this.node.attrs.propsData && 'modelValue' in this.node.attrs.propsData) {\n      (this._vnode = h(\n        this.comp as DefineComponent,\n        {\n          ...ret,\n          'onUpdate:modelValue': (v: any) => {\n            ret.modelValue = v\n          },\n        },\n        this._vnode))\n    }\n    else {\n      (this._vnode = h(\n        this.comp as DefineComponent,\n        { ...ret, a_mode: type, a_node: this.node },\n        this._vnode))\n    }\n\n    return this\n  }\n\n  editAction() {\n    if (!this._vnode)\n      return this;\n    (this._vnode as any).props.onMousedown = (e) => {\n      e.stopPropagation()\n\n      doc.value.select(this.node)\n    }\n    (this._vnode as any).props.onDragoverCapture = () => {\n      doc.value.select(this.node, 'hoverNode')\n    };\n    (this._vnode as any).props.onDragleave = () => {\n      doc.value.cancel('hoverNode')\n    }\n    (this._vnode as any).props.onMouseenter = () => {\n      doc.value.select(this.node, 'hoverNode')\n    }\n\n    (this._vnode as any).props.onMouseleave = () => {\n      doc.value.cancel('hoverNode')\n    }\n\n    return this\n  }\n}\n",
      "start": 1698982452713,
      "end": 1698982452720,
      "sourcemaps": null
    },
    {
      "name": "vite:css",
      "start": 1698982452720,
      "end": 1698982452720,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "result": "import { BaseRenderer } from \"alioth-vue\";\nimport { h } from \"vue\";\nimport { cloneDeep } from \"lodash-es\";\nimport { emitter, useV } from \"phecda-vue\";\nimport { GridItem } from \"grid-layout-plus\";\nconst { doc, activePage } = useV(__PHECDA__.doc);\nexport class renderer extends BaseRenderer {\n  propsData;\n  grid() {\n    if (!this._vnode)\n      return this;\n    const node = this.node;\n    this._vnode = h(GridItem, {\n      ...node.attrs.layout,\n      onMove() {\n        activePage.value.children.forEach((node2) => {\n          node2.set(\"layout.x\", node2.attrs.layout.x);\n          node2.set(\"layout.y\", node2.attrs.layout.y);\n        });\n      },\n      onResize() {\n        node.set(\"layout.h\", node.attrs.layout.h);\n        node.set(\"layout.w\", node.attrs.layout.w);\n      },\n      onResized() {\n        emitter.emit(\"alioth:node-action\", null);\n      },\n      onMoved() {\n        emitter.emit(\"alioth:node-action\", null);\n      }\n    }, this._vnode);\n    return this;\n  }\n  main(type) {\n    if (this.node.parent?.id === \"root\") {\n      this._vnode = h(\n        this.comp,\n        { ...this.node.attrs, a_mode: type, a_node: this.node },\n        this._vnode\n      );\n      return this;\n    }\n    const ret = $alioth_interval.filter(cloneDeep(this.node.attrs.propsData));\n    if (type === \"render\" && this.node.attrs.propsData && \"modelValue\" in this.node.attrs.propsData) {\n      this._vnode = h(\n        this.comp,\n        {\n          ...ret,\n          \"onUpdate:modelValue\": (v) => {\n            ret.modelValue = v;\n          }\n        },\n        this._vnode\n      );\n    } else {\n      this._vnode = h(\n        this.comp,\n        { ...ret, a_mode: type, a_node: this.node },\n        this._vnode\n      );\n    }\n    return this;\n  }\n  editAction() {\n    if (!this._vnode)\n      return this;\n    this._vnode.props.onMousedown = (e) => {\n      e.stopPropagation();\n      doc.value.select(this.node);\n    };\n    this._vnode.props.onDragoverCapture = () => {\n      doc.value.select(this.node, \"hoverNode\");\n    };\n    this._vnode.props.onDragleave = () => {\n      doc.value.cancel(\"hoverNode\");\n    };\n    this._vnode.props.onMouseenter = () => {\n      doc.value.select(this.node, \"hoverNode\");\n    };\n    this._vnode.props.onMouseleave = () => {\n      doc.value.cancel(\"hoverNode\");\n    };\n    return this;\n  }\n}\n",
      "start": 1698982452720,
      "end": 1698982452733,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "D:/MyProject/5/alioth/packages/preset-layout/src/grid/editor/renderer.ts"
        ],
        "sourcesContent": [
          "// import { cloneDeep, isSymbol } from 'lodash-es'\nimport { BaseRenderer } from 'alioth-vue'\nimport type { DefineComponent } from 'vue'\nimport { h } from 'vue'\nimport { cloneDeep } from 'lodash-es'\nimport { emitter, useV } from 'phecda-vue'\nimport { GridItem } from 'grid-layout-plus'\n\nconst { doc, activePage } = useV(__PHECDA__.doc)\n\nexport class renderer extends BaseRenderer<any> {\n  propsData: any\n\n  grid() {\n    if (!this._vnode)\n      return this\n\n    const node = this.node\n    this._vnode = h(GridItem, {\n      ...node.attrs.layout,\n      onMove() {\n        activePage.value.children.forEach((node: any) => {\n          node.set('layout.x', node.attrs.layout.x)\n          node.set('layout.y', node.attrs.layout.y)\n        })\n      },\n      onResize() {\n        node.set('layout.h', node.attrs.layout.h)\n        node.set('layout.w', node.attrs.layout.w)\n      },\n      onResized() {\n        emitter.emit('alioth:node-action', null)\n      },\n      onMoved() {\n        emitter.emit('alioth:node-action', null)\n      },\n    }, this._vnode)\n    return this\n  }\n\n  main(type: string) {\n    if (this.node.parent?.id === 'root') {\n      this._vnode = h(\n        this.comp as DefineComponent,\n        { ...this.node.attrs, a_mode: type, a_node: this.node },\n        this._vnode,\n      )\n      return this\n    }\n    const ret = $alioth_interval.filter(cloneDeep(this.node.attrs.propsData))\n    if (type === 'render' && this.node.attrs.propsData && 'modelValue' in this.node.attrs.propsData) {\n      (this._vnode = h(\n        this.comp as DefineComponent,\n        {\n          ...ret,\n          'onUpdate:modelValue': (v: any) => {\n            ret.modelValue = v\n          },\n        },\n        this._vnode))\n    }\n    else {\n      (this._vnode = h(\n        this.comp as DefineComponent,\n        { ...ret, a_mode: type, a_node: this.node },\n        this._vnode))\n    }\n\n    return this\n  }\n\n  editAction() {\n    if (!this._vnode)\n      return this;\n    (this._vnode as any).props.onMousedown = (e) => {\n      e.stopPropagation()\n\n      doc.value.select(this.node)\n    }\n    (this._vnode as any).props.onDragoverCapture = () => {\n      doc.value.select(this.node, 'hoverNode')\n    };\n    (this._vnode as any).props.onDragleave = () => {\n      doc.value.cancel('hoverNode')\n    }\n    (this._vnode as any).props.onMouseenter = () => {\n      doc.value.select(this.node, 'hoverNode')\n    }\n\n    (this._vnode as any).props.onMouseleave = () => {\n      doc.value.cancel('hoverNode')\n    }\n\n    return this\n  }\n}\n"
        ],
        "mappings": "AACA,SAAS,oBAAoB;AAE7B,SAAS,SAAS;AAClB,SAAS,iBAAiB;AAC1B,SAAS,SAAS,YAAY;AAC9B,SAAS,gBAAgB;AAEzB,MAAM,EAAE,KAAK,WAAW,IAAI,KAAK,WAAW,GAAG;AAExC,aAAM,iBAAiB,aAAkB;AAAA,EAC9C;AAAA,EAEA,OAAO;AACL,QAAI,CAAC,KAAK;AACR,aAAO;AAET,UAAM,OAAO,KAAK;AAClB,SAAK,SAAS,EAAE,UAAU;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd,SAAS;AACP,mBAAW,MAAM,SAAS,QAAQ,CAACA,UAAc;AAC/C,UAAAA,MAAK,IAAI,YAAYA,MAAK,MAAM,OAAO,CAAC;AACxC,UAAAA,MAAK,IAAI,YAAYA,MAAK,MAAM,OAAO,CAAC;AAAA,QAC1C,CAAC;AAAA,MACH;AAAA,MACA,WAAW;AACT,aAAK,IAAI,YAAY,KAAK,MAAM,OAAO,CAAC;AACxC,aAAK,IAAI,YAAY,KAAK,MAAM,OAAO,CAAC;AAAA,MAC1C;AAAA,MACA,YAAY;AACV,gBAAQ,KAAK,sBAAsB,IAAI;AAAA,MACzC;AAAA,MACA,UAAU;AACR,gBAAQ,KAAK,sBAAsB,IAAI;AAAA,MACzC;AAAA,IACF,GAAG,KAAK,MAAM;AACd,WAAO;AAAA,EACT;AAAA,EAEA,KAAK,MAAc;AACjB,QAAI,KAAK,KAAK,QAAQ,OAAO,QAAQ;AACnC,WAAK,SAAS;AAAA,QACZ,KAAK;AAAA,QACL,EAAE,GAAG,KAAK,KAAK,OAAO,QAAQ,MAAM,QAAQ,KAAK,KAAK;AAAA,QACtD,KAAK;AAAA,MACP;AACA,aAAO;AAAA,IACT;AACA,UAAM,MAAM,iBAAiB,OAAO,UAAU,KAAK,KAAK,MAAM,SAAS,CAAC;AACxE,QAAI,SAAS,YAAY,KAAK,KAAK,MAAM,aAAa,gBAAgB,KAAK,KAAK,MAAM,WAAW;AAC/F,MAAC,KAAK,SAAS;AAAA,QACb,KAAK;AAAA,QACL;AAAA,UACE,GAAG;AAAA,UACH,uBAAuB,CAAC,MAAW;AACjC,gBAAI,aAAa;AAAA,UACnB;AAAA,QACF;AAAA,QACA,KAAK;AAAA,MAAM;AAAA,IACf,OACK;AACH,MAAC,KAAK,SAAS;AAAA,QACb,KAAK;AAAA,QACL,EAAE,GAAG,KAAK,QAAQ,MAAM,QAAQ,KAAK,KAAK;AAAA,QAC1C,KAAK;AAAA,MAAM;AAAA,IACf;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa;AACX,QAAI,CAAC,KAAK;AACR,aAAO;AACT,IAAC,KAAK,OAAe,MAAM,cAAc,CAAC,MAAM;AAC9C,QAAE,gBAAgB;AAElB,UAAI,MAAM,OAAO,KAAK,IAAI;AAAA,IAC5B;AACA,IAAC,KAAK,OAAe,MAAM,oBAAoB,MAAM;AACnD,UAAI,MAAM,OAAO,KAAK,MAAM,WAAW;AAAA,IACzC;AACA,IAAC,KAAK,OAAe,MAAM,cAAc,MAAM;AAC7C,UAAI,MAAM,OAAO,WAAW;AAAA,IAC9B;AACA,IAAC,KAAK,OAAe,MAAM,eAAe,MAAM;AAC9C,UAAI,MAAM,OAAO,KAAK,MAAM,WAAW;AAAA,IACzC;AAEA,IAAC,KAAK,OAAe,MAAM,eAAe,MAAM;AAC9C,UAAI,MAAM,OAAO,WAAW;AAAA,IAC9B;AAEA,WAAO;AAAA,EACT;AACF;",
        "names": [
          "node"
        ]
      }
    },
    {
      "name": "vite:json",
      "start": 1698982452733,
      "end": 1698982452733,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1698982452733,
      "end": 1698982452733,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "start": 1698982452733,
      "end": 1698982452733,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1698982452733,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1698982452734,
      "end": 1698982452734,
      "order": "normal"
    }
  ]
}
